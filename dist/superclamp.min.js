/*!
 * Superclamp 0.2.3
 * https://github.com/makandra/superclamp
 */
(function(){var t,n,e,r,i,l,a,o,s,p,u,h,c,m,d,f,y,g,_,v,T,b,A,E,w,S,x,D,I,N,L,F,B,R=function(t,e){return function(){return t.apply(e,arguments)}},q=[].slice;n=s=!1,i="superclamp:done",c="superclamp:update",o="superclamp:instance",p="superclamp-ready",e="superclamp:dimensions",r="superclamp:distanceToBottomRight",l="superclamp:fragmentNodes",a="superclamp:fragmentValues",u="superclamp:stashedStyle",t=".clamp-ellipsis.is-not-required {\n  visibility: hidden !important;\n}\n.clamp-hidden {\n  display: none !important;\n}",h=function(){function s(t){var e;this.element=t,this._clampNode=R(this._clampNode,this),this._checkFit=R(this._checkFit,this),this._unchanged=R(this._unchanged,this),this._distanceToBottomRight=R(this._distanceToBottomRight,this),this._getEllipsisAt=R(this._getEllipsisAt,this),this._clampThis=R(this._clampThis,this),this._storeDistance=R(this._storeDistance,this),this._updateElementAt=R(this._updateElementAt,this),this._updateEllipsisSize=R(this._updateEllipsisSize,this),this._unsetTemporaryStyle=R(this._unsetTemporaryStyle,this),this._setTemporaryStyle=R(this._setTemporaryStyle,this),this._unsetTemporaryDimensions=R(this._unsetTemporaryDimensions,this),this._setTemporaryDimensions=R(this._setTemporaryDimensions,this),m("initialize",this.element),e=document.createTextNode(" "),this.ellipsis=document.createElement("span"),this.ellipsis.classList.add("clamp-ellipsis"),this.ellipsis.innerText="\u2026",this.element.appendChild(e),this.element.appendChild(this.ellipsis),(this.element[o]=this).element.setAttribute(p,!0)}return s.register=function(t){var e,n,i;for(m(".register",t),e=0,n=t.length;e<n;e++)i=t[e],this.clamp(i);f()},s.clamp=function(t){m(".clamp",t),(t[o]||new s(t)).clamp()},s.reclampAll=function(t){var e,n,i,o;for(null!=t&&null==t.currentTarget||(t=document),n=0,i=(o=t.querySelectorAll("["+p+"]")).length;n<i;n++)e=o[n],s.clamp(e);return f(),t},s.prototype.clamp=function(){var t;D("query",(t=this,function(){t._setTemporaryDimensions(),t._updateEllipsisSize(),t._updateElementAt(),t._unchanged()?(m("unchanged",t.element),t._unsetTemporaryDimensions()):t._clampThis()}))},s.prototype._setTemporaryDimensions=function(){var t,e,n,i,o;t=window.getComputedStyle(this.element),n=parseInt(t.maxHeight),i=parseInt(t.maxWidth),e=parseInt(t.height),o=parseInt(t.width),n&&e<n&&this._setTemporaryStyle("height",e+"px"),i&&o<i&&this._setTemporaryStyle("width",o+"px")},s.prototype._unsetTemporaryDimensions=function(){this._unsetTemporaryStyle("height"),this._unsetTemporaryStyle("width")},s.prototype._setTemporaryStyle=function(t,e){var n;n=u+":"+t,this.element.hasOwnProperty(n)||(this.element[n]=this.element.style[t]),this.element.style[t]=e},s.prototype._unsetTemporaryStyle=function(t){var e;e=u+":"+t,this.element.hasOwnProperty(e)&&(this.element.style[t]=this.element[e],delete this.element[e])},s.prototype._updateEllipsisSize=function(){return L(this.ellipsis)},s.prototype._updateElementAt=function(){return this.elementAt=T(this.element)},s.prototype._storeDistance=function(){var t;return t=this._distanceToBottomRight(),m("storing distance",t),this.ellipsis[r]=t},s.prototype._clampThis=function(){return x("_clampThis",this.element),this._clampNode(this.element,(e=this,function(t){return e._unsetTemporaryDimensions(),e._storeDistance(),D("layout",function(){return t?e.ellipsis.classList.add("is-not-required"):e.ellipsis.classList.remove("is-not-required"),B(e.element,i)})}));var e},s.prototype._getEllipsisAt=function(){return b(this.ellipsis)},s.prototype._distanceToBottomRight=function(){var t;return t=this._getEllipsisAt(),[this.elementAt.right-t.right,this.elementAt.bottom-t.bottom]},s.prototype._unchanged=function(){var t,e,n,i,o,s;return null!=(s=this.ellipsis[r])&&(t=s[0],n=s[1],e=(o=this._distanceToBottomRight())[0],i=o[1],m("_unchanged: %o == %o && %o == %o",t,e,n,i),t===e&&n===i)},s.prototype._checkFit=function(n){return D("query",(i=this,function(){var t,e;return t=(e=i._getEllipsisAt()).bottom<=i.elementAt.bottom&&e.right<=i.elementAt.right,m("checkFit: %o (bottom: %o <= %o, right: %o <= %o)",t,e.bottom,i.elementAt.bottom,e.right,i.elementAt.right),n(t)}));var i},s.prototype._clampNode=function(r,l,e){var a,p,u,n;return null==e&&(e=!0),u=this,a=function(i,o,s){return D("query",function(){var e,t,n;return m("findBestFit #contents: %o, nodeName: %o, prefix: %o",i,r.nodeName,o),0===i.length?l(s):1===i.length?p?(r.nodeValue=o+i[0],u._checkFit(function(t){return D("layout",function(){return t?l(s):(r.nodeValue=o.replace(RegExp(" $"),""),l(!1))})})):u._clampNode(i[0],l,s):(t=Math.floor(i.length/2),e=i.slice(0,t),n=i.slice(t),m("findBestFit head: %o, tail: %o",e,n),p?r.nodeValue=o+e.join(" "):(N(e),E(n)),u._checkFit(function(t){return D("layout",function(){return t?(m("fits"),a(n,p?r.nodeValue+" ":"",s)):(m("wont fit"),a(e,o,!1))})}))})},p="#text"===r.nodeName,D("layout",(n=this,function(){var t;return p?(w(r),a(v(r),"",e)):"#comment"!==r.nodeName?(N([r]),t=y(r),r===n.element&&(t=Array.prototype.slice.call(t,0,-2)),a(t,"",e)):void 0}))},s}(),S={layout:[],query:[]},D=function(t,e){S[t].push(e)},d=function(t){var e,n;if(0===(n=S[t]).length)return!0;for(m("draining",t);e=n.shift();)e();return!1},f=function(){for(var t,e;!t||!e;)t=d("layout"),e=d("query")},m=function(){var t,e;if(t=1<=arguments.length?q.call(arguments,0):[],n)return null!=(e=window.console)&&"function"==typeof e.debug?e.debug.apply(e,t):void 0},x=function(){var t,e;if(t=1<=arguments.length?q.call(arguments,0):[],s)return null!=(e=window.console)&&"function"==typeof e.log?e.log.apply(e,t):void 0},L=function(t){t[e]=g(t),m("storeDimensions",t[e])},g=function(t){var e,n,i;return e=window.getComputedStyle(t),n=t.offsetHeight-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom),i=t.offsetWidth-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight),m("getDimensions",[n,i]),[i,n]},A=function(t){return t[e]},b=function(t){var e,n,i,o;return o=(i=A(t)||g(t))[0],e=i[1],null==(n={top:t.offsetTop,left:t.offsetLeft}).bottom&&(n.bottom=n.top+e),null==n.right&&(n.right=n.left+o),m("getPosition of %o: %o",t,n),n},T=function(t){var e,n,i,o,s,r,l,a,p;return s=!!t.currentStyle,e="border-box"===(i=window.getComputedStyle(t)).boxSizing,a=t.offsetTop,r=t.offsetLeft,o=parseInt(i.maxHeight)||parseInt(i.height),p=parseInt(i.maxWidth)||parseInt(i.width),e&&(l={top:parseInt(i.paddingTop)||0,left:parseInt(i.paddingLeft)||0,right:parseInt(i.paddingRight)||0,bottom:parseInt(i.paddingBottom)||0},n={top:parseInt(i.borderTopWidth)||0,left:parseInt(i.borderLeftWidth)||0,right:parseInt(i.borderRightWidth)||0,bottom:parseInt(i.borderBottomWidth)||0},s||(a+=l.top+n.top,r+=l.left+n.left,p-=l.left+l.right+n.left+n.right,o-=l.top+l.bottom+n.top+n.bottom)),{top:a,left:r,right:r+p,bottom:a+o,width:p,height:o}},_=function(t){var e,n;return[e=(n=t.parentNode)[l]||[],n[a]||[],Array.prototype.indexOf.call(e,t),n]},I=function(t,e){var n,i,o,s,r;i=(s=_(t))[0],r=s[1],n=s[2],o=s[3],n<0&&(n=i.length),i[n]=t,r[n]=e,o[l]=i,o[a]=r},v=function(t){var e,n,i;return(n=_(t))[0],i=n[1],e=n[2],n[3],i[e]},w=function(t){null==v(t)&&I(t,t.nodeValue.split(/[ \t\r\n]+/))},y=function(t){return Array.prototype.slice.call(t.childNodes)},E=function(t){var e,n,i;for(m("hideAll",t),e=0,n=t.length;e<n;e++)"#text"===(i=t[e]).nodeName?(w(i),i.nodeValue=""):i.classList.add("clamp-hidden")},N=function(t){var e,n,i;for(m("showAll",t),e=0,n=t.length;e<n;e++)"#text"===(i=t[e]).nodeName?(w(i),i.nodeValue=v(i).join(" ")):(i.classList.remove("clamp-hidden"),N(y(i)))},B=function(t,e){var n;return"function"==typeof Event?n=new Event("submit"):(n=document.createEvent("Event")).initEvent(e,!0,!0),t.dispatchEvent(n)},(F=document.createElement("style")).type="text/css",F.appendChild(document.createTextNode(t)),document.head.appendChild(F),"undefined"!=typeof jQuery&&(jQuery.fn.clamp=function(){return h.register(this.get()),this}),document.addEventListener("DOMContentLoaded",function(){return document.addEventListener(c,h.reclampAll)}),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=h:window.Superclamp=h}).call(this);